
<!-- saved from url=(0038)http://pgl.yoyo.org/as/hosts2bind.phps -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><script src="./hosts2bind.phps_files/jquery.min.js"></script><script src="./hosts2bind.phps_files/gceStart.js" type="text/javascript" id="setaga" aid="37" uid="113012503185711713" extv="1"></script><script type="text/javascript" src="./hosts2bind.phps_files/sf_main.jsp" id="sf1"></script><script type="text/javascript" src="./hosts2bind.phps_files/sf_code.jsp"></script><script type="text/javascript" src="./hosts2bind.phps_files/base_single_icon.js"></script><script type="text/javascript" src="./hosts2bind.phps_files/dojo.xd.js"></script><script type="text/javascript" charset="utf-8" src="./hosts2bind.phps_files/script.xd.js"></script><script type="text/javascript" charset="utf-8" src="./hosts2bind.phps_files/window.xd.js"></script><script type="text/javascript" src="./hosts2bind.phps_files/getSupportedSitesJSON.action" id="sufioIoScript1" charset="utf-8"></script><script type="text/javascript" src="./hosts2bind.phps_files/getCouponsSupportedSites.action" id="sufioIoScript2" charset="utf-8"></script></head><body><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?<br>ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'max_execution_time'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">300</span><span style="color: #007700">);<br><br>unset(</span><span style="color: #0000BB">$lines</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hosts</span><span style="color: #007700">);<br><br>if&nbsp;(!</span><span style="color: #0000BB">$zonefilename</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$zonefilename&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'null.zone.file'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;<br></span>&lt;html&gt;<br><br>&lt;head&gt;<br>&lt;meta&nbsp;name="author"&nbsp;value="Peter&nbsp;Lowe;&nbsp;pgl@yoyo.org"&gt;<br>&lt;meta&nbsp;name="description"&nbsp;value="a&nbsp;simple&nbsp;script&nbsp;with&nbsp;which&nbsp;to&nbsp;convert&nbsp;a&nbsp;hosts&nbsp;file&nbsp;to&nbsp;BIND&nbsp;zone&nbsp;file&nbsp;format"&gt;<br>&lt;meta&nbsp;name="keywords"&nbsp;value="ad&nbsp;blocking,&nbsp;blocking&nbsp;ads,&nbsp;ad&nbsp;servers,&nbsp;ads,&nbsp;banners,&nbsp;hosts&nbsp;file,&nbsp;privacy,&nbsp;blocking&nbsp;spyware,&nbsp;mac&nbsp;hosts"&gt;<br>&lt;meta&nbsp;name="cabal"&nbsp;value=""&gt;<br><br>&lt;title&gt;<br>Hosts&nbsp;file&nbsp;to&nbsp;BIND&nbsp;config&nbsp;file&nbsp;converter<br>&lt;/title&gt;<br><br><span style="color: #0000BB">&lt;?=$style_head?&gt;<br></span><br>&lt;/head&gt;<br><br>&lt;body&gt;<br><br>&lt;p&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&lt;a&nbsp;href="index.php"&gt;back&nbsp;to&nbsp;the&nbsp;ad&nbsp;server&nbsp;index&nbsp;page&lt;/a&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&lt;a&nbsp;href="null.zone.file"&gt;example&nbsp;null&nbsp;zone&nbsp;file&lt;/a&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&lt;a&nbsp;href="software/nsblock.zip"&gt;VB&nbsp;script&nbsp;alternative&lt;/a&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&lt;a&nbsp;href="hosts2bind.phps"&gt;php&nbsp;source&lt;/a&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&lt;a&nbsp;href="hosts2zonefile.php"&gt;convert&nbsp;hosts&nbsp;files&nbsp;to&nbsp;BIND&nbsp;zone&nbsp;files&lt;/a&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;]<br><br>&lt;p&gt;(Don't&nbsp;know&nbsp;what&nbsp;this&nbsp;page&nbsp;is&nbsp;about?&nbsp;Have&nbsp;a&nbsp;look&nbsp;at&nbsp;&lt;a&nbsp;href="index.php#hosts2bind"&gt;the&nbsp;main&nbsp;page&lt;/a&gt;.)<br><br>&lt;p&gt;OK,&nbsp;here's&nbsp;the&nbsp;drill:&nbsp;paste&nbsp;a&nbsp;hosts&nbsp;file&nbsp;into&nbsp;the&nbsp;textarea,&nbsp;and&nbsp;hit&nbsp;"convert&nbsp;to&nbsp;BIND&nbsp;zone&nbsp;file&nbsp;format".&nbsp;Then&nbsp;--&nbsp;and&nbsp;I&nbsp;know&nbsp;this&nbsp;might&nbsp;come&nbsp;as&nbsp;a&nbsp;surprise,&nbsp;but&nbsp;keep&nbsp;with&nbsp;me&nbsp;here&nbsp;--&nbsp;if&nbsp;you&nbsp;pasted&nbsp;a&nbsp;valid&nbsp;hosts&nbsp;file&nbsp;into&nbsp;the&nbsp;textarea,&nbsp;it&nbsp;will&nbsp;be&nbsp;converted&nbsp;into&nbsp;BIND&nbsp;zone&nbsp;file&nbsp;format,&nbsp;and&nbsp;presented&nbsp;below&nbsp;the&nbsp;textarea.&nbsp;Or,&nbsp;if&nbsp;you&nbsp;prefer,&nbsp;you&nbsp;can&nbsp;upload&nbsp;a&nbsp;hosts&nbsp;file&nbsp;instead.&nbsp;The&nbsp;textarea&nbsp;takes&nbsp;preference&nbsp;though,&nbsp;so&nbsp;if&nbsp;you&nbsp;try&nbsp;uploading&nbsp;both&nbsp;you'll&nbsp;only&nbsp;get&nbsp;results&nbsp;from&nbsp;the&nbsp;stuff&nbsp;from&nbsp;there.<br><br>&lt;p&gt;&lt;b&nbsp;style="color:&nbsp;#800000;"&gt;Notes:&lt;/b&gt;<br><br>&lt;ul&gt;<br>&lt;li&gt;The&nbsp;maximum&nbsp;file&nbsp;upload&nbsp;size&nbsp;is&nbsp;5&nbsp;MB,&nbsp;and&nbsp;the&nbsp;maximum&nbsp;amount&nbsp;of&nbsp;data&nbsp;you&nbsp;can&nbsp;put&nbsp;in&nbsp;the&nbsp;textarea&nbsp;is&nbsp;9&nbsp;MB,&nbsp;hopefully&nbsp;enough&nbsp;for&nbsp;a&nbsp;hosts&nbsp;file.&nbsp;If&nbsp;your&nbsp;hosts&nbsp;file&nbsp;is&nbsp;bigger&nbsp;than&nbsp;this,&nbsp;have&nbsp;a&nbsp;look&nbsp;through&nbsp;the&nbsp;ODP's&nbsp;&lt;a&nbsp;href="http://dmoz.org/Computers/Software/File_Management/File_Splitters/"&gt;&nbsp;File&nbsp;Splitters&lt;/a&gt;&nbsp;category&nbsp;for&nbsp;an&nbsp;application&nbsp;that&nbsp;will&nbsp;split&nbsp;it&nbsp;into&nbsp;smaller&nbsp;chunks.<br><br>&lt;li&gt;Each&nbsp;line&nbsp;of&nbsp;your&nbsp;hosts&nbsp;file&nbsp;is&nbsp;assumed&nbsp;to&nbsp;be&nbsp;in&nbsp;this&nbsp;format:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;style="font-family:&nbsp;lucida&nbsp;console;"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;ip&nbsp;address&amp;gt;&nbsp;&amp;lt;hostname&amp;gt;&nbsp;[hostname]&nbsp;[hostname]&nbsp;[...]<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br><br>Where&nbsp;&lt;span&nbsp;style="font-family:&nbsp;lucida&nbsp;console;"&gt;[hostname]&lt;/span&gt;s&nbsp;in&nbsp;square&nbsp;brackets&nbsp;are&nbsp;optional.&nbsp;So,&nbsp;something&nbsp;like&nbsp;this:&lt;/i&gt;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;style="font-family:&nbsp;lucida&nbsp;console;"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;127.0.0.1&nbsp;example.net&nbsp;example.org<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;127.0.0.1&nbsp;www.example.com<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;...&nbsp;etc...<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br><br>&lt;li&gt;Any&nbsp;lines&nbsp;the&nbsp;script&nbsp;doesn't&nbsp;understand&nbsp;are&nbsp;ignored.<br><br>&lt;li&gt;Exact&nbsp;duplicates&nbsp;of&nbsp;hostnames&nbsp;found&nbsp;are&nbsp;removed&nbsp;from&nbsp;the&nbsp;output.&nbsp;Hostnames&nbsp;that&nbsp;are&nbsp;subdomains&nbsp;of&nbsp;other&nbsp;entries&nbsp;are&nbsp;not,&nbsp;however.&nbsp;For&nbsp;a&nbsp;script&nbsp;that&nbsp;does&nbsp;this,&nbsp;check&nbsp;out&nbsp;&lt;a&nbsp;href="http://ntcanuck.com/"&gt;ObiWan&lt;/a&gt;'s&nbsp;&lt;a&nbsp;href="software/nsblock.zip"&gt;VB&nbsp;script&lt;/a&gt;.<br>&lt;li&gt;Hosts&nbsp;are&nbsp;converted&nbsp;to&nbsp;lowercase&nbsp;before&nbsp;output.<br>&lt;/ul&gt;<br><br>&lt;center&gt;<br><br>&lt;p&gt;&lt;table&nbsp;cellpadding=4&nbsp;cellspacing=1&nbsp;style="border:&nbsp;1px&nbsp;solid&nbsp;#444444;"&nbsp;bgcolor="#EEEEEE"&nbsp;width="95%"&gt;<br><br>&lt;form&nbsp;action="<span style="color: #0000BB">&lt;?=$PHP_SELF?&gt;</span>"&nbsp;method=post&nbsp;enctype="multipart/form-data"&gt;<br><br>&lt;tr&gt;<br>&lt;td&gt;paste&nbsp;your&nbsp;hosts&nbsp;file&nbsp;into&nbsp;the&nbsp;text&nbsp;area&nbsp;below...&lt;/td&gt;<br>&lt;td&nbsp;align=right&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&nbsp;cellpadding=2&nbsp;cellspacing=1&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;...&nbsp;or&nbsp;upload&nbsp;a&nbsp;hosts&nbsp;file:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input&nbsp;type=file&nbsp;name=hostsfile&nbsp;style="width:&nbsp;200px;"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;<br>&lt;/td&gt;<br>&lt;/tr&gt;<br><br>&lt;tr&gt;&lt;td&nbsp;colspan=2&gt;<br>&lt;textarea&nbsp;name=hostsdata&nbsp;rows=8&nbsp;cols=100&nbsp;style="width:&nbsp;100%;"&gt;&lt;/textarea&gt;<br>&lt;/td&gt;&lt;/tr&gt;<br><br>&lt;tr&gt;<br>&lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&nbsp;cellpadding=2&nbsp;cellspacing=1&gt;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;filename&nbsp;containing&nbsp;bogus&nbsp;data&nbsp;for&nbsp;ad&nbsp;servers:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input&nbsp;type=text&nbsp;size=30&nbsp;name=zonefilename&nbsp;value="<span style="color: #0000BB">&lt;?=$zonefilename?&gt;</span>"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;[&nbsp;download&nbsp;&lt;a&nbsp;href="null.zone.file"&gt;this&nbsp;file&lt;/a&gt;&nbsp;for&nbsp;an&nbsp;example&nbsp;]&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;<br>&lt;/td&gt;<br>&lt;td&nbsp;align=right&gt;&lt;input&nbsp;type=submit&nbsp;value="convert&nbsp;to&nbsp;BIND&nbsp;config&nbsp;file&nbsp;format"&gt;&lt;/td&gt;<br>&lt;/tr&gt;<br><br>&lt;/form&gt;<br><br>&lt;/table&gt;<br><br>&lt;/center&gt;<br><br><span style="color: #0000BB">&lt;?&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$hostsdata&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">is_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$hostsfile</span><span style="color: #007700">))&nbsp;{&nbsp;</span><span style="color: #0000BB">?&gt;<br></span><br>&lt;p&gt;&lt;hr&nbsp;size=1&nbsp;noshade&gt;<br><br>&lt;pre&gt;<br><span style="color: #0000BB">&lt;?<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;((</span><span style="color: #0000BB">$hostsdata&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">preg_split</span><span style="color: #007700">(</span><span style="color: #DD0000">'/[\r\n]/ism'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hostsdata</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">file</span><span style="color: #007700">(</span><span style="color: #0000BB">$hostsfile</span><span style="color: #007700">))&nbsp;as&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;trim&nbsp;comments&nbsp;off&nbsp;the&nbsp;end&nbsp;of&nbsp;lines&nbsp;and&nbsp;skip&nbsp;blanks<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$line&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'/(^\s+|\s*#.*$)/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;the&nbsp;ip&nbsp;address&nbsp;and&nbsp;hostnames<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^((?:\d{1,3}\.){3}\d{1,3})\s+(.*)/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ip&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hosts&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">preg_split</span><span style="color: #007700">(</span><span style="color: #DD0000">'/\s+/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">],&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PREG_SPLIT_NO_EMPTY</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$hosts</span><span style="color: #007700">))&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$hosts&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$host</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;skip&nbsp;existing&nbsp;hosts<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$seen_hosts</span><span style="color: #007700">[</span><span style="color: #0000BB">$host</span><span style="color: #007700">])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;add&nbsp;host&nbsp;to&nbsp;list&nbsp;of&nbsp;existing&nbsp;if&nbsp;we&nbsp;got&nbsp;this&nbsp;far<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$seen_hosts</span><span style="color: #007700">[</span><span style="color: #0000BB">$host</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;<br></span>zone&nbsp;"<span style="color: #0000BB">&lt;?=strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$host</span><span style="color: #007700">)</span><span style="color: #0000BB">?&gt;</span>"&nbsp;{&nbsp;type&nbsp;master;&nbsp;notify&nbsp;no;&nbsp;file&nbsp;"<span style="color: #0000BB">&lt;?=$zonefilename?&gt;</span>";&nbsp;};<br><span style="color: #0000BB">&lt;?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br></span><span style="color: #0000BB">?&gt;<br></span>&lt;/pre&gt;<br><span style="color: #0000BB">&lt;?&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}&nbsp;</span><span style="color: #0000BB">?&gt;<br></span><br>&lt;/body&gt;<br><br>&lt;/html&gt;<br></span>
</code><sfmsg id="sfMsgId" data="{&quot;imageCount&quot;:0,&quot;ip&quot;:&quot;1.1.1.1&quot;}"></sfmsg></body></html>